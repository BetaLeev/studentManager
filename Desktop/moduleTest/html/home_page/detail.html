<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../../aui-20170109-v2.1/css/aui.css" />
    <link rel="stylesheet" href="../../css/common.css">
    <script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
    <title>è¯¦æƒ…é¡µ</title>
    <style>
        header {
            position: fixed !important;
            padding-top: 25px !important;
            height: 50px;
            background: rgba(255, 255, 255, .1) !important;
        }

        header * {
            color: #fff !important;
        }

        .comment-rate {
            float: right;
            color: #869ed2;
        }

        .banner {
            height: 210px;
            width: 100%;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .banner>img {
            width: 100%;
        }

        .container {
            width: 95%;
            margin: 0 auto;
        }

        .plate {
            padding: 12px;
            border-bottom: 1px solid #ececec;
        }

        .name {
            position: relative;
        }

        .top-rate {
            position: absolute;
            ;
            right: 10px;
            color: yellow;
        }

        .top-rate p {
            display: flex;
            font-size: 1rem;
        }

        .top-rate img {
            width: auto;
            margin-top: 5px;
            height: 20px;
        }

        html,
        body,
        h4,
        p,
        h5 {
            color: #4B4B4B;
            padding: 0;
            margin: 0;
        }

        h4 {
            font-size: 1.125rem;
        }

        .small-p {
            width: 90%;
            font-size: 0.675rem;
            padding: 0;
            margin: 0;
        }

        .title {
            font-size: .875rem;
            padding-bottom: 10px;
        }

        .text {
            font-size: 0.675rem;
        }

        .price {
            margin-top: 12px;
            font-size: 1rem;
        }
        /*å›¾æ ‡åŒºåŸŸ*/

        .device-icon {
            width: 85%;
            margin: 0 auto;
            display: -webkit-flex;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .icon-item {
            height: 64px;
            text-align: center;
            width: 20%;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .icon-item span {
            font-size: .6rem;
            text-align: center;
        }

        .icon-item>img {
            height: 34px;
            display: block;
            padding: 4px;
            /*width: 100%;*/
            margin: 0 auto;
        }
        /*è¯„è®ºåŒºåŸŸ*/

        .comment-item {
            clear: both;
            margin: 15px 0px;
        }

        .comment-user {
            height: 50px;
            width: 100%;
            clear: both;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            margin-right: 10px;
            float: left;
        }

        .user-avatar img {
            height: 100%;
            width: 100%;
            margin-top: -8px;
        }

        .user-info {
            height: 50px;
            margin-right: 20px;
            float: left;
        }

        .user-name {
            line-height: 20px;
            font-size: 0.675rem;
        }

        .user-data {
            font-size: .5rem;
            line-height: 14px;
        }

        .comment-text {
            margin-top: 10px;
            padding-bottom: 10px;
            text-align: left;
        }
        /*ä½ç½®ä¿¡æ¯åŒºåŸŸ*/

        .position {
            padding: 30px;
            width: 100%;
            height: 370px;
        }
        /*åº•éƒ¨æŒ‰é’®åŒºåŸŸ*/

        .bottom-button-group {
            height: 50px;
            width: 100%;
            display: flex;
        }

        .bottom-button-group button {
            width: 50%;
            height: 100%;
        }

        .btn-more {
            background: #f7f7f7;
            color: #fdd66e;
        }

        .btn-in {
            color: black;
            background: #fdd66e;
        }

        .map-text {
            font-size: .5rem;
        }
    </style>
</head>

<body>
    <div id='detail'>
        <header class="aui-bar aui-bar-nav aui-bar-light">
            <div class="aui-pull-left aui-btn">
                <span class="aui-iconfont aui-icon-left" onclick="closeCurrentWin()"></span>
            </div>
            <div class="aui-pull-right aui-btn">
                <span class="aui-iconfont aui-icon-forward" @click="wxShare()"></span> &nbsp&nbsp&nbsp&nbsp
                <span class="aui-iconfont aui-icon-like" @click="collectHandle()"></span>
            </div>
        </header>

        <div class="banner">
            <img :src="current.img">
        </div>


        <div class="container">
            <div class="name plate">
                <div class="top-rate">
                    <p><img src="../../image/five-star.png" alt=""><span>5åˆ†</span></p>
                </div>

                <h4>{{current.title}}</h4>
                <p class="small-p">{{current.subtitle}}</p>
                <p class="small-p">åŒ—äº¬å¸‚ä¸°å°åŒºï¼ˆèˆªä¸°è·¯1å·é™¢2å·æ¥¼ï¼‰æ—¶ä»£è´¢å¯Œå¤©åœ°cåº§305</p>
                <p class="small-p">å¯ç”¨æ—¶é—´:24h</p>
                <p class="price">Â¥ {{current.price}} å…ƒ</p>
            </div>
            <div class="device plate">
                <p class="title">é…å¥—è®¾æ–½</p>
                <div class="device-icon">
                    <div class="icon-item">
                        <img src="../../image/chair.png" alt="">
                        <span>æ¡Œæ¤…</span>
                    </div>
                    <div class="icon-item">
                        <img src="../../image/clean.png" alt="">
                        <span>ä¿æ´</span>
                    </div>
                    <div class="icon-item">
                        <img src="../../image/eletric.png" alt="">
                        <span>æ°´ç”µ</span>
                    </div>
                    <div class="icon-item">
                        <img src="../../image/safe.png" alt="">
                        <span>å®‰ä¿</span>
                    </div>
                    <div class="icon-item">
                        <img src="../../image/wifi.png" alt="">
                        <span>ç½‘ç»œ</span>
                    </div>
                    <div class="icon-item">
                        <img src="../../image/white-borad.png" alt="">
                        <span>ç™½æ¿</span>
                    </div>
                    <div class="icon-item">
                        <img src="../../image/drink.png" alt="">
                        <span>å…è´¹é¥®å“</span>
                    </div>
                    <div class="icon-item">
                        <img src="../../image/tv.png" alt="">
                        <span>æ™ºèƒ½ç”µè§†</span>
                    </div>
                    <div class="icon-item">
                        <img src="../../image/work.png" alt="">
                        <span>åŠå…¬ç”¨å“</span>
                    </div>
                    <div class="icon-item">
                        <img src="../../image/lunch.png" alt="">
                        <span>å¾®æ³¢ç‚‰</span>
                    </div>
                </div>

            </div>
            <div class="plate place-background">
                <p class="title">ç«™ä¸»ä¼ä¸šèƒŒæ™¯</p>
                <p class="text">ä¸­ä¼è”ç›Ÿå¤ªå¹³æ´‹å›½é™…ä¼šå±•ç§‘æŠ€æœ‰é™å…¬å¸ï¼Œæ˜¯ä¸€ä¸ªæ‹¥æœ‰105ä½ä¸“ä¸šç®¡ç†å’¨è¯¢é¡¾é—®çš„å›½é™…åŒ–ä¼šå±•ç§‘æŠ€ é›†å›¢å…¬å¸ã€‚æˆ‘ä»¬ç«­è¯šä¸ºå®¢æˆ·æä¾›å¯Œæœ‰åˆ›æ–°æ€§ï¼Œæˆ˜ç•¥æ€§ï¼Œå‰ç»æ€§çš„å•†ä¸šä¼˜åŒ–è§£å†³æ–¹æ¡ˆï¼Œæä¾›ä¼šå±•å…¨æ¡ˆä¸“ä¸šæœåŠ¡ã€‚</p>
            </div>
            <div class="describle plate">
                <p class="title">é©¿ç«™ä»‹ç»</p>
                <p class="text">éå¸ƒå…¨ç¨‹éšæ—¶ä¼šè®®ï¼Œä¼šè®®æ—¶é—´å®‰æ’çµæ´»ï¼Œç§»åŠ¨ç•…èŠç‰©æœ‰æ‰€å€¼ï¼Œç¡¬ä»¶é…ç½®å®Œå–„é½å…¨ã€‚</p>

            </div>
            <div class="comment plate">
                <p class="title">è¯„è®º</p>
                <div class="comment-container">
                    <div class="comment-item">
                        <div class="comment-user">
                            <div class="user-avatar">
                                <img src="../../image/avatar-demo.png" alt="">
                            </div>
                            <div class="user-info">
                                <p class="user-name">ä»»é£å¹</p>
                                <p class="user-date">2019.10.23</p>
                            </div>
                        </div>
                        <p class="comment-text">ç«™ä¸»éå¸¸niceï¼Œç«™ä¸»éå¸¸niceï¼Œç«™ä¸»éå¸¸niceï¼Œç«™ä¸»éå¸¸niceï¼Œ
                        </p>
                    </div>

                    <div class="comment-item">
                        <div class="comment-user">
                            <div class="user-avatar">
                                <img src="../../image/avatar-demo.png" alt="">
                            </div>
                            <div class="user-info">
                                <p class="user-name">ä»»é£å¹</p>
                                <p class="user-date">2019.10.23</p>
                            </div>
                        </div>
                        <p class="comment-text">ç«™ä¸»éå¸¸niceï¼Œç«™ä¸»éå¸¸niceï¼Œç«™ä¸»éå¸¸niceï¼Œç«™ä¸»éå¸¸niceï¼Œ
                        </p>
                    </div>
                    <p class="comment-more">
                        <span><a href="" class="text-color__blue">é˜…è¯»å…¨éƒ¨22æ¡è¯„è®º</a></span>
                        <span class="comment-rate">ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</span>
                    </p>

                </div>
            </div>
            <div class="position plate" id='baidu'>
                <p class="title">ä½ç½®</p>
                <p class="text">ä¸­å›½ï¼ŒåŒ—äº¬</p>
                <p class="map-text">è¯¦ç»†åœ°å€ï¼šåŒ—äº¬å¸‚ä¸°å°åŒºï¼ˆèˆªä¸°è·¯1å·é™¢5å·æ¥¼ï¼‰æ—¶ä»£è´¢å¯Œå¤©åœ°cåº§305</p>
            </div>
        </div>
        <div class="bottom-button-group">
            <button style='background: #f7f7f7;
            color: #fdd66e;' class="btn-normal" tapmode onclick="goNextWin('./place_list.html')">æ›´å¤šç©ºé—´</button>
            <button style="background:  #fdd66e;
            color:#f7f7f7" class="btn-normal" tapmode @click="bookHandle()">ä¸€é”®å…¥é©»</button>
        </div>
    </div>
    <script type="text/javascript" src="../../script/api.js"></script>
    <script src="../../script/common.js" charset="utf-8"></script>
    <script type="text/javascript">
    </script>
    <script type="text/javascript">
        apiready = function() {
            initMap(1380);
            setAnnotations();
            var pageId = api.pageParam.id || '';
            if (pageId) {
                $api.setStorage('detailId', pageId);
            } else {
                pageId = 111;
            }

            var detail = new Vue({
                el: '#detail',
                computed: {
                    current() {
                        var obj = {}
                        this.list.filter(function(item) {
                            if (item.id === pageId) {
                                obj = item;
                            }
                        })
                        return obj
                    }
                },
                data() {
                    return {
                        // id: pageId,
                        // currentDetail: {
                        //     id: 0,
                        //     img: '',
                        //     title:"",
                        //     subtitle: '',
                        //     price: 0,
                        // },
                        list: [{
                            id: 111,
                            img: '../../image/other/canguan2.jpg',
                            title: 'æ—¶ä»£å·¥åœºæ—é£é©¿ç«™',
                            subtitle: 'é€‚ç”¨äºï¼šå–èŒ¶ä¼šå‹ï¼Œä¼‘å…»ç”Ÿæ¯12',
                            price: "400"
                        }, {
                            id: 222,
                            img: '../../image/other/office.jpg',
                            title: 'æ—¶ä»£å·¥åœºNO.1',
                            subtitle: 'ä¼šå±•æœåŠ¡ï¼Œä¼ä¸šæµ·å¤–å‘å±•å’¨è¯¢é¡¾é—®',
                            price: '499'
                        }, {
                            id: 333,
                            img: '../../image/other/take-pic.png',
                            title: 'æ—¶ä»£å·¥åœºæ™¨æ—¶é©¿ç«™',
                            subtitle: 'å„¿ç«¥æ•™è‚²ï¼Œå½±è§†åŸ¹è®­',
                            price: '800'
                        }, {
                            id: 444,
                            img: '../../image/other/canguan1.png',
                            title: 'æ—¶ä»£å·¥åœºæˆ‘æœ¬é©¿ç«™',
                            subtitle: 'å¥åº·ç®¡ç†ï¼Œä¼ä¸šå†…è®­',
                            price: '399'
                        }, {
                            id: 555,
                            img: '../../image/other/44.png',
                            title: 'æ—¶ä»£å·¥åœºInfinité©¿ç«™',
                            subtitle: 'å®¢æˆ·è”ç»œä¸šåŠ¡ï¼Œæ‰©å±•åŠäº‹å¤„ï¼Œä¸ªäººåˆ›ä¸šç­‰',
                            price: '499'
                        }, {
                            id: 666,
                            img: '../../image/other/55.png',
                            title: 'æ—¶ä»£å·¥åœºè‹±ç‹®é©¿ç«™',
                            subtitle: 'é«˜ä¸­ç•™å­¦ç”Ÿæ•™è‚²è®¡åˆ’ï¼Œä¸“ä¸šè¯¾ç¨‹å®šåˆ¶',
                            price: '899'
                        }]
                    }
                },
                methods: {
                    wxShare() {
                        var imgUrl = this.current.img
                        var wxPlus = api.require('wxPlus');
                        wxPlus.shareImage({
                            apiKey: 'wxf476d7072eeddaae',
                            scene: 'session',
                          
                            contentUrl: imgUrl,
                        }, function(ret, err) {
                            if (ret.status) {
                                alert('åˆ†äº«æˆåŠŸ');
                            } else {
                                alert(err.code);
                            }
                        });

                    },
                    bookHandle() {
                        toBookDetail(this.current.id, this.current.img, this.current.title, this.current.subtitle, this.current.price)
                    },
                    collectHandle() {
                        var id = this.id;
                        var openid = $api.getStorage('openid') || '';
                        if (openid) {
                            console.log(openid)
                            swal("æˆåŠŸ", "æ”¶è—æˆåŠŸ", "success")
                        } else {
                            swal("é”™è¯¯", "è¯·æ‚¨å…ˆå»ç™»é™†", "error")
                            goNextWin('../mine_page/login.html')
                        }

                        var model = api.require("model");
                        model.config({
                            appKey: 'B4BE1D4A-18F6-42D1-48CF-DF6C6EA9983E',
                        })
                        model.insert({
                            class: "era_my_collect",
                            value: {
                                type: 'æ–‡ç« ',
                                openId: openid,
                                pageId: id
                            }
                        }, function(ret, err) {
                            if (err) {
                                swal("é”™è¯¯", "åŠ å…¥æ”¶è—å¤±è´¥", "error")
                            } else if (ret) {
                                swal("æˆåŠŸ", "æ”¶è—æˆåŠŸ", "success")
                            }
                        });
                    }
                }
            })
        }
    </script>
    <script src="https://cdn.bootcss.com/sweetalert/2.1.2/sweetalert.min.js"></script>
    <script src="../../script/common.js" charset="utf-8"></script>
    <script type="text/javascript">
        function toBookDetail(id, img, title, subtitle, price) {
            api.openWin({
                name: 'è®¢å•é¡µ',
                url: './place_detail.html',
                pageParam: {
                    id: id,
                    img: img,
                    title: title,
                    subtitle: subtitle,
                    price: price
                }
            })
        }
    </script>
</body>

</html>
